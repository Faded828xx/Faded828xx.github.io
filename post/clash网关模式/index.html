<!DOCTYPE html>
<html lang="en"><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title>Faded828xx Blog</title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2022.3">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Courier; color: #88b966; -webkit-text-stroke: #88b966}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Times; color: #000000; -webkit-text-stroke: #000000}
    span.s1 {font-kerning: none; color: #9ba2b1; background-color: #1e2127; -webkit-text-stroke: 0px #9ba2b1}
    span.s2 {font-kerning: none}
    span.s3 {font-kerning: none; color: #dfb468; -webkit-text-stroke: 0px #dfb468}
  </style>
</head>
<body>
<p class="p1"><span class="s1"><b>&lt;link rel=</b></span><span class="s2"><b>"shortcut icon"</b></span><span class="s1"><b> href=</b></span><span class="s2"><b>"favicon.ico"</b></span><span class="s1"><b> </b></span><span class="s3"><b>type</b></span><span class="s1"><b>=</b></span><span class="s2"><b>"image/x-icon"</b></span><span class="s1"><b> /&gt;</b></span></p>
<p class="p2"><span class="s2"><span class="Apple-converted-space"> </span></span></p>
</body>
</html>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container">
            <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"></button>
            <a class="brand" href="https://faded828xx.github.io">Faded828xx Blog</a>
            <div class="nav-collapse collapse">
                <ul class="nav">
                    
                    
                        
                            <li>
                                <a href="/about/">
                                    
                                    <span>About</span>
                                </a>
                            </li>
                        
                    
                        
                            <li>
                                <a href="/post/">
                                    
                                    <span>All posts</span>
                                </a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
    </div>
</nav><div id="content" class="container">

<div class="row-fluid navmargin">
    <div class="page-header">
        <h1>Clash网关模式 - Thu, Nov 25, 2021</h1>
    </div>
    <p class="lead"></p>
    <p>clash用老久了，现在记录点东西。</p>
<p>机场上网和vpn上网是不同的，vpn更为普通用户所知， 前者相对用户基数更小。vpn用途更多，多用于远程访问内网，且用户先建立连接，然后发出代理请求，科学上网时，这里的内网往往是代理服务器。数据包特征明显，容易被GFW嗅探，并封锁。大型vpn厂商往往有多个主机换来换去，有钱！</p>
<p>然而机场，是在本地和远程同时部署两个服务器，进行加密解密，GFW无法读取数据报文，本地流量选择性地根据代理规则发送到代理服务器，然而事实上除了科学上网，有其他很多的正常需求是以同样的方式访问国际上的网站， 因此GFW不能一棒子打死。</p>
<p>当购买机场时，买的是代理商在国外部署的服务器信息， 包括端口、加密方式、密钥等等。尽量选择大机场，有保证，但是挺贵的，高中毕业那会用的是十块每月的，已经跑路了，现在的是七十块三个月，已经小涨价了一波，之前是五十六仨月的，真坏。一般的机场，往往一推荐，用的人多了，也就不好用了，而且防止跑路和敏感时期风险， 尽量一次性买短期的。</p>
<p>此外，关于代理流量，vpn是链路层代理，而机场的ss协议等，是在会话层代理，因此用机场的话， 一些特殊流量，如游戏在TCP层是根本不走代理软件，直接无视本机的代理规则。 但是如果用网关模式，本地的所有流量都经过网关，再由网关根据规则进行转发，即可对所有流量进行监管。</p>
<p>初步尝试了一下clash的网关代理。用法很简单，在其他设备上进行局域网代理配置就行了，不过要注意，iphone上要把上网软件的本地网络选项打开，就是那个弹窗 允许访问局域网的其他设备，如果不开， iphone上的该软件根本访问不到代理网关。</p>
<p>这样的代理网关模式，应该是以后在家里的最佳选择，对所有家里的设备都代理到一台只跑这个服务的老机子，性能肯定够，而且ip啥的都没问题。省的在所有的设备上都搞个梯子，还耗电。 但是现在就很少用到这个了。</p>
<p>今天在iphone上 看neiflix的 Arcane，因为网飞的节目因地域而变化，因此会检查代理，之前还行的，别的片子也行，就这个Arcane不行，索性直接在电脑上开网关模式了，然后才能下载下来。</p>

    <h4><a href="https://faded828xx.github.io">Back to Home</a></h4>
</div>


        </div><footer class="container">
    <hr class="soften">
    <p>

    <a href="https://gitlab.com/maxlefou/hugo.386">hugo.386 theme by Max le Fou</a> | 

&copy; 
<a href="http://jmf-portfolio.netlify.com" target="_blank">
    JM Fergeau
</a>
<span id="thisyear">2020</span>


        | Built on <a href="//gohugo.io" target="_blank">Hugo</a>
</p>
    <p class="text-center">
        
        
        
        <a href="https://github.com/Faded828xx">GitHub</a> 
        
    </p>
</footer>

</body><link rel="stylesheet" href="/css/bootstrap.css">
<link rel="stylesheet" href="/css/bootstrap-responsive.css">
<link rel="stylesheet" href="/css/style.css">

<script src="/js/jquery.js"></script>
<script src="/js/bootstrap-386.js"></script>
<script src="/js/bootstrap-transition.js"></script>
<script src="/js/bootstrap-alert.js"></script>
<script src="/js/bootstrap-modal.js"></script>
<script src="/js/bootstrap-dropdown.js"></script>
<script src="/js/bootstrap-scrollspy.js"></script>
<script src="/js/bootstrap-tab.js"></script>
<script src="/js/bootstrap-tooltip.js"></script>
<script src="/js/bootstrap-popover.js"></script>
<script src="/js/bootstrap-button.js"></script>
<script src="/js/bootstrap-collapse.js"></script>
<script src="/js/bootstrap-carousel.js"></script>
<script src="/js/bootstrap-typeahead.js"></script>
<script src="/js/bootstrap-affix.js"></script>
<script>
    _386 = { 
        fastLoad: false ,
        onePass: false , 
        speedFactor: 1 
    };

    
    function ThisYear() {
        document.getElementById('thisyear').innerHTML = new Date().getFullYear();
    };
</script></html>
